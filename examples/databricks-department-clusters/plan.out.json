{"format_version":"0.1","terraform_version":"0.14.6","variables":{"cluster_name":{"value":"Shared Cluster"},"department":{"value":"Data Engineering"},"group_name":{"value":"Data engineering"},"tags":{"value":{"Project":"New project"}},"user_names":{"value":["user1@example.com","user2@example.com","user3@example.com"]}},"planned_values":{"outputs":{"cluster_name":{"sensitive":false,"value":"Data Engineering-Shared Cluster"}},"root_module":{"child_modules":[{"resources":[{"address":"module.azure_databricks_demo.databricks_cluster.team_cluster","mode":"managed","type":"databricks_cluster","name":"team_cluster","provider_name":"registry.terraform.io/databricks/databricks","schema_version":2,"values":{"autoscale":[{"max_workers":10,"min_workers":1}],"autotermination_minutes":20,"aws_attributes":[],"azure_attributes":[],"cluster_log_conf":[],"cluster_name":"Data Engineering-Shared Cluster","custom_tags":null,"data_security_mode":null,"docker_image":[],"gcp_attributes":[],"idempotency_token":null,"init_scripts":[],"instance_pool_id":null,"is_pinned":null,"library":[],"node_type_id":"Standard_DS3_v2","num_workers":0,"policy_id":null,"single_user_name":null,"spark_conf":null,"spark_env_vars":null,"spark_version":"10.4.x-scala2.12","ssh_public_keys":null,"timeouts":null,"workload_type":[]}},{"address":"module.azure_databricks_demo.databricks_cluster_policy.fair_use","mode":"managed","type":"databricks_cluster_policy","name":"fair_use","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"definition":"{\"autoscale.min_workers\":{\"hidden\":true,\"type\":\"fixed\",\"value\":1},\"custom_tags.Team\":{\"type\":\"fixed\",\"value\":\"Data Engineering\"},\"dbus_per_hour\":{\"maxValue\":10,\"type\":\"range\"},\"driver_node_type_id\":{\"hidden\":true,\"type\":\"fixed\",\"value\":\"Standard_L8as_v3\"},\"instance_pool_id\":{\"hidden\":true,\"type\":\"forbidden\"}}","name":"Data Engineering Cluster Policy"}},{"address":"module.azure_databricks_demo.databricks_group.data_eng","mode":"managed","type":"databricks_group","name":"data_eng","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"allow_cluster_create":false,"allow_instance_pool_create":false,"databricks_sql_access":false,"display_name":"Data engineering","external_id":null,"force":null,"workspace_access":false}},{"address":"module.azure_databricks_demo.databricks_group_member.data_eng_member[\"user1@example.com\"]","mode":"managed","type":"databricks_group_member","name":"data_eng_member","index":"user1@example.com","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0},{"address":"module.azure_databricks_demo.databricks_group_member.data_eng_member[\"user2@example.com\"]","mode":"managed","type":"databricks_group_member","name":"data_eng_member","index":"user2@example.com","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0},{"address":"module.azure_databricks_demo.databricks_group_member.data_eng_member[\"user3@example.com\"]","mode":"managed","type":"databricks_group_member","name":"data_eng_member","index":"user3@example.com","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0},{"address":"module.azure_databricks_demo.databricks_permissions.can_manage_team_cluster","mode":"managed","type":"databricks_permissions","name":"can_manage_team_cluster","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"access_control":[{"group_name":"Data engineering","permission_level":"CAN_MANAGE","service_principal_name":"","user_name":""}],"authorization":null,"cluster_policy_id":null,"directory_id":null,"directory_path":null,"experiment_id":null,"instance_pool_id":null,"job_id":null,"notebook_id":null,"notebook_path":null,"pipeline_id":null,"registered_model_id":null,"repo_id":null,"repo_path":null,"sql_alert_id":null,"sql_dashboard_id":null,"sql_endpoint_id":null,"sql_query_id":null}},{"address":"module.azure_databricks_demo.databricks_permissions.can_use_cluster_policy","mode":"managed","type":"databricks_permissions","name":"can_use_cluster_policy","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"access_control":[{"group_name":"Data engineering","permission_level":"CAN_USE","service_principal_name":"","user_name":""}],"authorization":null,"cluster_id":null,"directory_id":null,"directory_path":null,"experiment_id":null,"instance_pool_id":null,"job_id":null,"notebook_id":null,"notebook_path":null,"pipeline_id":null,"registered_model_id":null,"repo_id":null,"repo_path":null,"sql_alert_id":null,"sql_dashboard_id":null,"sql_endpoint_id":null,"sql_query_id":null}},{"address":"module.azure_databricks_demo.databricks_user.de[\"user1@example.com\"]","mode":"managed","type":"databricks_user","name":"de","index":"user1@example.com","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"active":true,"allow_cluster_create":false,"allow_instance_pool_create":false,"databricks_sql_access":false,"external_id":null,"force":null,"user_name":"user1@example.com","workspace_access":false}},{"address":"module.azure_databricks_demo.databricks_user.de[\"user2@example.com\"]","mode":"managed","type":"databricks_user","name":"de","index":"user2@example.com","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"active":true,"allow_cluster_create":false,"allow_instance_pool_create":false,"databricks_sql_access":false,"external_id":null,"force":null,"user_name":"user2@example.com","workspace_access":false}},{"address":"module.azure_databricks_demo.databricks_user.de[\"user3@example.com\"]","mode":"managed","type":"databricks_user","name":"de","index":"user3@example.com","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"active":true,"allow_cluster_create":false,"allow_instance_pool_create":false,"databricks_sql_access":false,"external_id":null,"force":null,"user_name":"user3@example.com","workspace_access":false}}],"address":"module.azure_databricks_demo"}]}},"resource_changes":[{"address":"module.azure_databricks_demo.databricks_cluster.team_cluster","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_cluster","name":"team_cluster","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"autoscale":[{"max_workers":10,"min_workers":1}],"autotermination_minutes":20,"aws_attributes":[],"azure_attributes":[],"cluster_log_conf":[],"cluster_name":"Data Engineering-Shared Cluster","custom_tags":null,"data_security_mode":null,"docker_image":[],"gcp_attributes":[],"idempotency_token":null,"init_scripts":[],"instance_pool_id":null,"is_pinned":null,"library":[],"node_type_id":"Standard_DS3_v2","num_workers":0,"policy_id":null,"single_user_name":null,"spark_conf":null,"spark_env_vars":null,"spark_version":"10.4.x-scala2.12","ssh_public_keys":null,"timeouts":null,"workload_type":[]},"after_unknown":{"autoscale":[{}],"aws_attributes":[],"azure_attributes":[],"cluster_id":true,"cluster_log_conf":[],"default_tags":true,"docker_image":[],"driver_instance_pool_id":true,"driver_node_type_id":true,"enable_elastic_disk":true,"enable_local_disk_encryption":true,"gcp_attributes":[],"id":true,"init_scripts":[],"library":[],"state":true,"url":true,"workload_type":[]}}},{"address":"module.azure_databricks_demo.databricks_cluster_policy.fair_use","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_cluster_policy","name":"fair_use","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"definition":"{\"autoscale.min_workers\":{\"hidden\":true,\"type\":\"fixed\",\"value\":1},\"custom_tags.Team\":{\"type\":\"fixed\",\"value\":\"Data Engineering\"},\"dbus_per_hour\":{\"maxValue\":10,\"type\":\"range\"},\"driver_node_type_id\":{\"hidden\":true,\"type\":\"fixed\",\"value\":\"Standard_L8as_v3\"},\"instance_pool_id\":{\"hidden\":true,\"type\":\"forbidden\"}}","name":"Data Engineering Cluster Policy"},"after_unknown":{"id":true,"policy_id":true}}},{"address":"module.azure_databricks_demo.databricks_group.data_eng","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_group","name":"data_eng","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"allow_cluster_create":false,"allow_instance_pool_create":false,"databricks_sql_access":false,"display_name":"Data engineering","external_id":null,"force":null,"workspace_access":false},"after_unknown":{"id":true,"url":true}}},{"address":"module.azure_databricks_demo.databricks_group_member.data_eng_member[\"user1@example.com\"]","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_group_member","name":"data_eng_member","index":"user1@example.com","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"group_id":true,"id":true,"member_id":true}}},{"address":"module.azure_databricks_demo.databricks_group_member.data_eng_member[\"user2@example.com\"]","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_group_member","name":"data_eng_member","index":"user2@example.com","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"group_id":true,"id":true,"member_id":true}}},{"address":"module.azure_databricks_demo.databricks_group_member.data_eng_member[\"user3@example.com\"]","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_group_member","name":"data_eng_member","index":"user3@example.com","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"group_id":true,"id":true,"member_id":true}}},{"address":"module.azure_databricks_demo.databricks_permissions.can_manage_team_cluster","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_permissions","name":"can_manage_team_cluster","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"access_control":[{"group_name":"Data engineering","permission_level":"CAN_MANAGE","service_principal_name":"","user_name":""}],"authorization":null,"cluster_policy_id":null,"directory_id":null,"directory_path":null,"experiment_id":null,"instance_pool_id":null,"job_id":null,"notebook_id":null,"notebook_path":null,"pipeline_id":null,"registered_model_id":null,"repo_id":null,"repo_path":null,"sql_alert_id":null,"sql_dashboard_id":null,"sql_endpoint_id":null,"sql_query_id":null},"after_unknown":{"access_control":[{}],"cluster_id":true,"id":true,"object_type":true}}},{"address":"module.azure_databricks_demo.databricks_permissions.can_use_cluster_policy","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_permissions","name":"can_use_cluster_policy","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"access_control":[{"group_name":"Data engineering","permission_level":"CAN_USE","service_principal_name":"","user_name":""}],"authorization":null,"cluster_id":null,"directory_id":null,"directory_path":null,"experiment_id":null,"instance_pool_id":null,"job_id":null,"notebook_id":null,"notebook_path":null,"pipeline_id":null,"registered_model_id":null,"repo_id":null,"repo_path":null,"sql_alert_id":null,"sql_dashboard_id":null,"sql_endpoint_id":null,"sql_query_id":null},"after_unknown":{"access_control":[{}],"cluster_policy_id":true,"id":true,"object_type":true}}},{"address":"module.azure_databricks_demo.databricks_user.de[\"user1@example.com\"]","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_user","name":"de","index":"user1@example.com","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"active":true,"allow_cluster_create":false,"allow_instance_pool_create":false,"databricks_sql_access":false,"external_id":null,"force":null,"user_name":"user1@example.com","workspace_access":false},"after_unknown":{"display_name":true,"id":true}}},{"address":"module.azure_databricks_demo.databricks_user.de[\"user2@example.com\"]","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_user","name":"de","index":"user2@example.com","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"active":true,"allow_cluster_create":false,"allow_instance_pool_create":false,"databricks_sql_access":false,"external_id":null,"force":null,"user_name":"user2@example.com","workspace_access":false},"after_unknown":{"display_name":true,"id":true}}},{"address":"module.azure_databricks_demo.databricks_user.de[\"user3@example.com\"]","module_address":"module.azure_databricks_demo","mode":"managed","type":"databricks_user","name":"de","index":"user3@example.com","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"active":true,"allow_cluster_create":false,"allow_instance_pool_create":false,"databricks_sql_access":false,"external_id":null,"force":null,"user_name":"user3@example.com","workspace_access":false},"after_unknown":{"display_name":true,"id":true}}}],"output_changes":{"cluster_name":{"actions":["create"],"before":null,"after":"Data Engineering-Shared Cluster","after_unknown":false}},"prior_state":{"format_version":"0.1","terraform_version":"0.14.6","values":{"outputs":{"cluster_name":{"sensitive":false,"value":"Data Engineering-Shared Cluster"}},"root_module":{"child_modules":[{"resources":[{"address":"module.azure_databricks_demo.data.databricks_node_type.smallest","mode":"data","type":"databricks_node_type","name":"smallest","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"category":null,"gb_per_core":null,"graviton":null,"id":"Standard_L8as_v3","is_io_cache_enabled":null,"local_disk":true,"min_cores":null,"min_gpus":null,"min_memory_gb":null,"photon_driver_capable":null,"photon_worker_capable":null,"support_port_forwarding":null,"vcpu":null}},{"address":"module.azure_databricks_demo.data.databricks_spark_version.latest_lts","mode":"data","type":"databricks_spark_version","name":"latest_lts","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"beta":null,"genomics":null,"gpu":null,"graviton":null,"id":"10.4.x-scala2.12","latest":true,"long_term_support":true,"ml":null,"photon":null,"scala":"2.12","spark_version":null}}],"address":"module.azure_databricks_demo"}]}}},"configuration":{"provider_config":{"databricks":{"name":"databricks","expressions":{"auth_type":{"constant_value":"databricks-cli"}}}},"root_module":{"outputs":{"cluster_name":{"expression":{"references":["module.azure_databricks_demo.cluster_name"]}}},"module_calls":{"azure_databricks_demo":{"source":"../../modules/databricks-department-clusters","expressions":{"cluster_name":{"references":["var.cluster_name"]},"department":{"references":["var.department"]},"group_name":{"references":["var.group_name"]},"tags":{"references":["var.tags"]},"user_names":{"references":["var.user_names"]}},"module":{"outputs":{"cluster_name":{"expression":{"references":["databricks_cluster.team_cluster"]}}},"resources":[{"address":"databricks_cluster.team_cluster","mode":"managed","type":"databricks_cluster","name":"team_cluster","provider_config_key":"azure_databricks_demo:databricks","expressions":{"autoscale":[{"max_workers":{"constant_value":10},"min_workers":{"constant_value":1}}],"autotermination_minutes":{"constant_value":20},"cluster_name":{"references":["var.department","var.cluster_name"]},"node_type_id":{"constant_value":"Standard_DS3_v2"},"spark_version":{"references":["data.databricks_spark_version.latest_lts"]}},"schema_version":2},{"address":"databricks_cluster_policy.fair_use","mode":"managed","type":"databricks_cluster_policy","name":"fair_use","provider_config_key":"azure_databricks_demo:databricks","expressions":{"definition":{"references":["data.databricks_node_type.smallest","var.department"]},"name":{"references":["var.department"]}},"schema_version":0},{"address":"databricks_group.data_eng","mode":"managed","type":"databricks_group","name":"data_eng","provider_config_key":"azure_databricks_demo:databricks","expressions":{"display_name":{"references":["var.group_name"]}},"schema_version":0},{"address":"databricks_group_member.data_eng_member","mode":"managed","type":"databricks_group_member","name":"data_eng_member","provider_config_key":"azure_databricks_demo:databricks","expressions":{"group_id":{"references":["databricks_group.data_eng"]},"member_id":{"references":["databricks_user.de","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.user_names"]}},{"address":"databricks_permissions.can_manage_team_cluster","mode":"managed","type":"databricks_permissions","name":"can_manage_team_cluster","provider_config_key":"azure_databricks_demo:databricks","expressions":{"access_control":[{"group_name":{"references":["databricks_group.data_eng"]},"permission_level":{"constant_value":"CAN_MANAGE"}}],"cluster_id":{"references":["databricks_cluster.team_cluster"]}},"schema_version":0},{"address":"databricks_permissions.can_use_cluster_policy","mode":"managed","type":"databricks_permissions","name":"can_use_cluster_policy","provider_config_key":"azure_databricks_demo:databricks","expressions":{"access_control":[{"group_name":{"references":["databricks_group.data_eng"]},"permission_level":{"constant_value":"CAN_USE"}}],"cluster_policy_id":{"references":["databricks_cluster_policy.fair_use"]}},"schema_version":0},{"address":"databricks_user.de","mode":"managed","type":"databricks_user","name":"de","provider_config_key":"azure_databricks_demo:databricks","expressions":{"user_name":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.user_names"]}},{"address":"data.databricks_node_type.smallest","mode":"data","type":"databricks_node_type","name":"smallest","provider_config_key":"azure_databricks_demo:databricks","expressions":{"local_disk":{"constant_value":true}},"schema_version":0},{"address":"data.databricks_spark_version.latest_lts","mode":"data","type":"databricks_spark_version","name":"latest_lts","provider_config_key":"azure_databricks_demo:databricks","expressions":{"long_term_support":{"constant_value":true}},"schema_version":0}],"variables":{"cluster_name":{"description":"Name of the shared cluster to create"},"department":{"description":"Department name"},"group_name":{"description":"Name of the group to create"},"tags":{"default":{},"description":"Additional tags applied to all resources created"},"user_names":{"default":[],"description":"List of users to create in the specified group"}}}}},"variables":{"cluster_name":{"description":"Name of the shared cluster to create"},"department":{"description":"Department name"},"group_name":{"description":"Name of the group to create"},"tags":{"default":{},"description":"Additional tags applied to all resources created"},"user_names":{"default":[],"description":"List of users to create in the specified group"}}}}}
